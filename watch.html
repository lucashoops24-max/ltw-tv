<script src="app.js"></script>
<script>
const params = new URLSearchParams(location.search);
const id = params.get("id");

const videos = getVideos();

if (!id || !videos[id]) {
  document.getElementById("watch").innerHTML =
    "<p>Video not found.</p>";
} else {
  const v = videos[id];

  document.getElementById("watch").innerHTML = `
    <h2>${v.title}</h2>
    <iframe width="560" height="315"
    src="https://www.youtube.com/embed/${v.youtube}"
    allowfullscreen></iframe>

    <p>ğŸ‘ ${v.likes} | ğŸ‘ ${v.dislikes}</p>

    <button onclick="like()">Like</button>
    <button onclick="dislike()">Dislike</button>

    <h3>Comments</h3>
    <input id="c">
    <button onclick="comment()">Post</button>
    <div>${v.comments.join("<br>")}</div>
  `;

  function like() {
    v.likes++;
    save();
  }

  function dislike() {
    v.dislikes++;
    save();
  }

  function comment() {
    v.comments.push(user.name + ": " + c.value);
    save();
  }

  function save() {
    videos[id] = v;
    saveVideos(videos);
    location.reload();
  }
}
</script>
